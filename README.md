# 搜狗手机号查询程序。

## 结构
用gevent协程的方式实现程序并发，默认的并发量为70，可在config配置。   
需要一个redis数据库用于存储查询时需要的号码和请求所需的cookie。   
程序查询成功的标签号码入库到mysql中。   

## 流程
程序初始从redis，拿10(可配置)个cookie（单个cookie可用140次请求），10（可配置）个号段（1000个号码），缓存在本地队列。   
两个协程分别监控本地cookie，phone。当本地的cookie少于10个，号码少于1000个，程序会再去redis取，当redis中cookie，号码不够用时，会在日志中报警。(需要确保这个redis的稳定性)     
其它的协程跑任务（查号码和入库），号码的查询未成功会重试，mysql的入库未成功也会重试。号码查询完成，协程结束，再开一个协程查下个号码，总协程数小于设置的并发量。

## 速度
关于速度，跑在阿里云 双核，8g内存的节点上面的容器。一天能查询将近5000000的号码。
 